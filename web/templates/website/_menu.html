{% comment %}
Allow to customize the menu that appears at the top of every Evennia
webpage. Copy this file to your game dir's web/website
folder and edit it to add/remove links to the menu.
{% endcomment %}
{% load static %}
<style>
  .navbar {
    background: linear-gradient(180deg, rgba(20,10,35,0.95) 0%, rgba(35,15,55,0.9) 100%) !important;
    border-bottom: 3px solid #8b4513;
    border-image: linear-gradient(90deg, #d4af37 0%, #8b4513 50%, #d4af37 100%) 1;
    box-shadow: inset 0 1px 0 rgba(212,175,55,0.3), 0 8px 16px rgba(0,0,0,0.8);
  }
  
  .navbar-brand {
    color: #e8dcc8 !important;
    font-family: 'Georgia', serif;
    letter-spacing: 1px;
  }
  
  .watcher-eye {
    width: 32px;
    height: 32px;
    display: inline-block;
    position: relative;
    background: radial-gradient(circle at 30% 30%, #f0e68c, #8b7500);
    border-radius: 50%;
    margin: 0 8px;
    box-shadow: 0 0 8px #d4af37;
  }
</style>

<nav class="navbar navbar-dark font-weight-bold navbar-expand-md">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#menu-content"
    aria-controls="menu-content" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <a class="navbar-brand w-100 text-center" href="/" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 12px 0;">
    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 6px;">
      <div class="watcher-eye"></div>
      <div style="font-size: 2.5rem; font-weight: bold; color: #e8dcc8; text-shadow: 0 0 12px #8b4513; letter-spacing: 2px;">{{ game_name }}</div>
      <div class="watcher-eye"></div>
    </div>
    <div style="font-size: 1rem; color: #c19a6b; text-shadow: 0 0 6px #8b4513; letter-spacing: 1px; font-style: italic;">{{game_slogan}}</div>
  </a>
</nav>
<div style="width: 100%; height: 8px; background: linear-gradient(90deg, #d4af37 0%, #8b4513 25%, #d4af37 50%, #8b4513 75%, #d4af37 100%); margin-bottom: 16px; box-shadow: 0 4px 12px rgba(139,69,19,0.6); border-radius: 0 0 4px 4px;"></div>

  <div class="collapse navbar-collapse" id="menu-content">
    <ul class="navbar-nav">
      {% block navbar_left %}
      <li>
        <a class="nav-link" href="{% url 'index' %}">Home</a>
      </li>
      <!-- game views -->
      {% if account %}
      <li><a class="nav-link" href="{% url 'discourse-session-sync' %}" target="_top">Forum</a></li>
      {% else %}
      <!-- Forum link for non-logged-in users removed -->
      {% endif %}
      <li><a class="nav-link" href="{% url 'help' %}">Help</a></li>
      <!-- end game views -->

      {% if user.is_staff %}
      <li><a class="nav-link" href="{% url 'characters' %}">Characters</a></li>
      <li><a class="nav-link" href="{% url 'channels' %}">Channels</a></li>
      <li><a class="nav-link" href="{% url 'admin:index' %}">Admin</a></li>
      {% if rest_api_enabled %}
      <li><a class="nav-link" href="/api">API</a></li>
      {% endif %}
      {% endif %}

      {% if webclient_enabled %}
      <li><a class="nav-link" href="{% url 'webclient:index' %}">Play Online</a></li>
      {% endif %}
      {% endblock %}
    </ul>
    <ul class="nav navbar-nav ml-auto w-120 justify-content-end">
      {% block navbar_right %}
      {% endblock %}

      {% block navbar_user %}
      {% if account %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="user_options" aria-expanded="false">
          Logged in as {{ account.username }} <span class="caret"></span>
        </a>
        <div class="dropdown-menu" aria-labelledby="user_options">
          {% if not account.at_character_limit %}
          <a class="dropdown-item" href="{% url 'character-create' %}">Incarnate New Soul</a>
          {% endif %}
          <a class="dropdown-item" href="{% url 'character-manage' %}">Manage Souls</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{% url 'password_change' %}">Change Password</a>
          <form method="post" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="dropdown-item">Log Out</button>
          </form>
        </div>
      </li>
      <li>
        <form method="post" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="nav-link btn btn-link">Log Out</button>
        </form>
      </li>
      {% else %}
      <li>
        <a class="nav-link" href="{% url 'login' %}?next={{ request.path }}">Log In</a>
      </li>
      {% if register_enabled %}
      <li>
        <a class="nav-link" href="{% url 'register' %}">Register</a>
      </li>
      {% endif %}
      {% endif %}
      {% endblock %}
    </ul>
  </div>
</nav>
