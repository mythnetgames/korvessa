{% extends "webclient/base.html" %}

{% block client %}

<!-- Toolbar - keep exact structure expected by Evennia -->
<div id="toolbar"></div>

<!-- Main message window - keep exact structure expected by Evennia -->
<div id="main" class="split split-vertical" data-role-default>
  <div id="main-sub" class="split-sub">
    <div id="messagewindow"></div>
  </div>
</div>

<!-- Input area - keep exact structure expected by Evennia -->
<div id="input" class="split split-vertical" data-role-input data-update-append>
  <div id="inputform" class="wrapper">
    <div id="prompt" class="prompt"></div>
    <div id="inputcontrol" class="input-group">
      <textarea id="inputfield" type="text" class="form-control" placeholder="Type commands here..."></textarea>
      <span class="input-group-btn">
        <button class="btn btn-large btn-outline-primary" id="inputsend" type="button" value="">&gt;</button>
      </span>
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}
<!-- Korvessa custom enhancements -->
<script>
  $(document).ready(function() {
    // Add Korvessa branding to toolbar
    $('#toolbar').html('<span class="game-title">Korvessa - Year 160 AH</span>');
    
    // Auto-scroll message window to bottom
    var msgWindow = $('#messagewindow');
    var observer = new MutationObserver(function() {
      msgWindow.scrollTop(msgWindow[0].scrollHeight);
    });
    
    if (msgWindow[0]) {
      observer.observe(msgWindow[0], { childList: true, subtree: true });
    }
  });
</script>
{% endblock %}
